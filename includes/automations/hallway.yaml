- alias: Switch hallway 1 on
  initial_state: 'on'
  trigger:
    platform: state
    from: 'off'
    to: 'on'
    entity_id: switch.wall_switch_ln_158d0002112b1e
  action:
    service: switch.turn_on
    entity_id: switch.wall_switch_ln_158d0001f9aaae

- alias: Switch hallway 1 off
  initial_state: 'on'
  trigger:
    platform: state
    from: 'on'
    to: 'off'
    entity_id: switch.wall_switch_ln_158d0002112b1e
  action:
    service: switch.turn_off
    entity_id: switch.wall_switch_ln_158d0001f9aaae

- alias: Switch hallway 2 on
  initial_state: 'on'
  trigger:
    platform: state
    from: 'off'
    to: 'on'
    entity_id: switch.wall_switch_ln_158d0001f9aaae
  action:
    service: switch.turn_on
    entity_id: switch.wall_switch_ln_158d0002112b1e

- alias: Switch hallway 2 off
  initial_state: 'on'
  trigger:
    platform: state
    from: 'on'
    to: 'off'
    entity_id: switch.wall_switch_ln_158d0001f9aaae
  action:
    service: switch.turn_off
    entity_id: switch.wall_switch_ln_158d0002112b1e

- alias: Turn on lights in hallway when door is opened
  initial_state: 'on'
  trigger:
    platform: state
    entity_id: binary_sensor.door_window_sensor_158d00032b7db7
    to: 'on'
  condition:
    condition: state
    entity_id: switch.wall_switch_ln_158d0002112b1e
    state: 'off'
    for:
      minutes: 2
  action:
    - service: notify.telegram
      data:
        message: 'Открылась дверь в квартиру'
    - service: switch.turn_on
      entity_id:
        - switch.wall_switch_ln_158d0002112b1e
        - switch.wall_switch_ln_158d0001f9aaae

- alias: Turn off light in hallway after 6 minutes
  initial_state: 'on'
  trigger:
    platform: time_pattern
    minutes: '/1'
    seconds: 00
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: input_boolean.auto_turn_off_lights
        state: 'on'
      - condition: state
        entity_id: switch.wall_switch_ln_158d0002112b1e
        state: 'on'
        for:
          minutes: 6
      - condition: state
        entity_id: binary_sensor.door_window_sensor_158d00032b7db7
        state: 'off'
  action:
    service: switch.turn_off
    entity_id:
      - switch.wall_switch_ln_158d0002112b1e
      - switch.wall_switch_ln_158d0001f9aaae

- alias: Turn off switch-3 in hallway after 5 minutes
  initial_state: 'on'
  trigger:
    platform: time_pattern
    minutes: '/1'
    seconds: 00
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: input_boolean.auto_turn_off_lights
        state: 'on'
      - condition: state
        entity_id: switch.wall_switch_ln_right_158d00022a8150
        state: 'on'
        for:
          minutes: 5
  action:
    service: switch.turn_off
    entity_id: switch.wall_switch_ln_right_158d00022a8150


