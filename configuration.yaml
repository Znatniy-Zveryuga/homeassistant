homeassistant:
  name:       !secret home_name
  latitude:   !secret home_latitude
  longitude:  !secret home_longitude
  elevation:  !secret home_elevation
  time_zone:  !secret home_timezone
  customize:  !include_dir_merge_named includes/customizations
  packages:   !include_dir_named includes/packages
  unit_system: metric
  whitelist_external_dirs:
    - '/config/downloads'

config:
api:
system_health:
conversation:
history:
wake_on_lan:
mobile_app:
map:
sun:

lovelace: !include includes/lovelace.yaml

frontend:
  themes: !include_dir_merge_named themes

http:
  ip_ban_enabled: true
  login_attempts_threshold: 5
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1

discovery:
  ignore:
    - igd
    - yeelight
    - xiaomi_gw
#   - samsung_tv

system_log:
  fire_event: true

logger:
  default: info
# default: debug
  logs:
    midea: debug
    custom_components.rest.switch: debug
    homeassistant.components.xiaomi_miio.light: fatal
    miio.device: fatal

recorder:
  db_url: !secret db_mysql
  purge_keep_days: 30
  purge_interval: 1
  exclude:
    entities:
      - sensor.uptime
      - sensor.time
      - sensor.time_date
      - sensor.date
      - sensor.date_time
      - sensor.xiaomi_map

logbook:
  exclude:
    entities:
      - sensor.uptime
      - sensor.time
      - sensor.time_date
      - sensor.date
      - sensor.date_time
      - sensor.xiaomi_map

tts:
  - platform: google_translate
    service_name: google_say
    language: 'ru'

google_assistant:
  project_id: !secret google_home_id
  service_account: !include ga_ha.json
  exposed_domains:
    - light
    - vacuum
    - switch
    - script

mqtt:
  broker: 127.0.0.1
  discovery: true
  discovery_prefix: homeassistant
  birth_message:
    topic: 'hass/status'
    payload: 'online'
  will_message:
    topic: 'hass/status'
    payload: 'offline'

device_tracker:
  - platform: snmp
    host: !secret mikrotik_ip
    community: public
    baseoid: 1.3.6.1.2.1.4.22.1.2
    track_new_devices: false
    interval_seconds: 30
    consider_home: 120

xiaomi_aqara:
  discovery_retry: 10
  gateways:
    - mac: !secret xgate_1_mac
      key: !secret xgate_1_key
    - mac: !secret xgate_2_mac
      key: !secret xgate_2_key

telegram_bot:
  - platform: polling
    api_key: !secret telegram_bot_api_key
    allowed_chat_ids:
      - !secret telegram_bot_allowed_chat_id1

notify:
  - name: telegram
    platform: telegram
    chat_id: !secret telegram_bot_allowed_chat_id1

hacs:
  token: !secret my_github_access_token

switch:         !include_dir_merge_list includes/switches
sensor:         !include_dir_merge_list includes/sensors
binary_sensor:  !include_dir_merge_list includes/binary_sensors
light:          !include_dir_merge_list includes/lights
climate:        !include_dir_merge_list includes/climate
automation:     !include_dir_merge_list includes/automations
script:         !include_dir_merge_named includes/scripts
group:          !include includes/groups.yaml
media_player:   !include includes/media_player.yaml
yeelight:       !include includes/yeelight.yaml
input_boolean:  !include includes/input_boolean.yaml
input_number:   !include includes/input_number.yaml
input_select:   !include includes/input_select.yaml
input_text:     !include includes/input_text.yaml
panel_iframe:   !include includes/panel_iframe.yaml
timer:          !include includes/timer.yaml
counter:        !include includes/counter.yaml
scene:          !include includes/scenes.yaml

